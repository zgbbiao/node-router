webpackJsonp([12],{494:function(n,e,t){function a(n){r||t(680)}var r=!1,i=t(8)(t(590),t(643),a,null,null);i.options.__file="E:\\wanpWWW\\node-vue-react-mongodb\\vue_\\src\\views\\system\\merber\\list.vue",i.esModule&&Object.keys(i.esModule).some(function(n){return"default"!==n&&"__"!==n.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),i.options.functional&&console.error("[vue-loader] list.vue: functional components are not supported with templates, they should use render functions."),n.exports=i.exports},497:function(n,e,t){"use strict";function a(n){return/^[a-z0-9](?:[-_.+]?[a-z0-9]+)*@\w+\.com$/i.test(n.trim())}function r(n,e){for(var t=0;t<e.length;t++)if(n===e[t])return!0;return!1}e.b=a,t.d(e,"a",function(){return i}),e.c=r;var i=function(n){return/^1[3-9]{1}[0-9]{9}/.test(n)}},590:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t(497),r=t(97),i=r.a.filterDate;e.default={data:function(){var n=this,e=function(n,e,r){t.i(a.a)(e)?r():r(new Error("请输入正确的手机号码"))};return{Collapse:1,loading:!1,addMerber:!1,tableData:[{_id:"5a3d1a8af8ac693898b104be",username:"admin@wz.com",password:"123456",jurisdiction:"teacher-normal",phone:18816780001,gender:"1",age:"2017-11-09T16:00:00.000Z",__v:0,logindate:[1513953930714,1513954480038,1513954592608,1513954622692,1513957796577]}],formValidate:{username:"admin@wz15.com",password:"123456",gender:"1",phone:"18816782415",jurisdiction:"teacher-normal"},jurisdictionList:[{value:"teacher-normal",label:"教师"}],merberColumns:[{type:"selection",width:"30",align:"center"},{title:"姓名",key:"username",width:"180",sortable:!0},{title:"联系电话",key:"phone",width:"150",sortable:!0},{title:"年龄",key:"age",width:"150",sortable:!0,filters:[{label:"小于20",value:0},{label:"大于20",value:1},{label:"大于40",value:2},{label:"大于60",value:3},{label:"小于40",value:4}],filterMethod:function(n,e){var t=e.age;return 0===n?t<20:1===n?t>20:2===n?t>40:3===n?t>60:4===n?t<40:void 0}},{title:"性别",key:"gender",width:"80",sortable:!0},{title:"登录时间",key:"logindate",width:"200",sortable:!0},{title:"级别",key:"jurisdiction",width:"200",sortable:!0},{title:"操作",key:"action",render:function(e,t){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){n.edit(t.index)}}},"修改"),e("Button",{props:{type:"error",size:"small"},on:{click:function(e){n.remove(t.index)}}},"删除")])}}],ruleValidate:{username:[{required:!0,message:"用户名不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"change"}],phone:[{required:!0,trigger:"blur",validator:e}],jurisdiction:[{required:!0,message:"请选择用户类型",trigger:"blur"}]},skipPage:{pageSize:10,currentPage:1,sort:{logindate:-1},condition:{},total:0}}},methods:{reqMerberList:function(){var n=this;this.vFetch.merberList(this.skipPage).then(function(e){if(n.$Message.info(e.message),200===e.status){var t=[];e.res.forEach(function(n,e){for(var a in n){var r=n[a];"gender"===a&&("1"===r?r="男":"0"===r&&(r="女")),"age"===a&&(r=i(r)),"logindate"===a&&(r=Array.isArray(r)?r[r.length-1]:r,r=i(r)),/^\__/.test(a)?a=a.slice(2):/^\_/.test(a)&&(a=a.slice(1)),t[e]||(t[e]={}),t[e][a]=r}}),n.tableData=t,n.skipPage.total=e.total,n.skipPage.currentPage=e.page,n.$forceUpdate()}})},exportData:function(n){this.$refs.table.exportCsv({filename:"排序和过滤后的数据",original:!1})},edit:function(n){this.$router.push({path:"/merber/details",query:{username:this.tableData[n].username}})},remove:function(n){var e=this,t={username:this.tableData[n].username,token:this.$store.state.user.token};this.vFetch.merberRemove(t).then(function(t){e.$Message.info(t.message),200===t.status&&e.tableData.splice(n,1)})},btnMerberOk:function(){this.$Message.info("点击了确定")},btnMerberCancel:function(){this.$Message.info("点击了取消")},handleSubmit:function(n){var e=this;this.loading||(this.loading=!0,this.$refs[n].validate(function(n){if(n){var t=e.formValidate;t.token=e.$store.state.user.token,e.vFetch.addMerber(t).then(function(n){e.$Message.success(n.message),e.loading=!1,200===n.status&&(e.addMerber=!e.addMerber,e.$router.push({path:"/merber/list"}))}).catch(function(n){n&&e.$Message.error(n),e.loading=!1})}else e.$Message.error("表单验证失败!"),e.loading=!1}))},handleReset:function(n){for(var e in this.formValidate){this.formValidate[e];this.formValidate[e]=""}},changePage:function(n){this.skipPage.currentPage=n,this.reqMerberList()}},mounted:function(){this.reqMerberList()}}},608:function(n,e,t){e=n.exports=t(21)(!1),e.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* 可以设置不同的进入和离开动画 */\n/* 设置持续时间和动画函数 */\n.slide-fade-enter-active {\ntransition: all .3s ease;\n}\n.slide-fade-leave-active {\ntransition: all .8s cubic-bezier(1.0, 0.5, 0.8, 1.0);\n}\n.slide-fade-enter, .slide-fade-leave-to\n/* .slide-fade-leave-active for below version 2.1.8 */ {\ntransform: translateX(10px);\nopacity: 0;\n}\n.addMerberForm{\n    position: absolute;\n    top: 160px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    padding: 30px;\n    z-index: 10;\n}\n",""])},643:function(n,e,t){n.exports={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",[t("div",[t("i-button",{attrs:{type:"primary"},on:{click:function(e){n.addMerber=!n.addMerber}}},[n._v("添加会员")])],1),n._v(" "),t("Table",{ref:"table",attrs:{stripe:"",columns:n.merberColumns,data:n.tableData,size:"small"}}),n._v(" "),t("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[t("div",{staticStyle:{float:"right"}},[t("Page",{attrs:{total:n.skipPage.total,current:n.skipPage.currentPage},on:{"on-change":n.changePage}})],1)]),n._v(" "),t("i-button",{attrs:{type:"primary",size:"large"},on:{click:function(e){n.exportData(2)}}},[t("Icon",{attrs:{type:"ios-download-outline"}}),n._v(" 导出排序和过滤后的数据")],1),n._v(" "),t("transition",{attrs:{name:"slide-fade"}},[n.addMerber?t("div",{staticClass:"addMerberForm"},[t("i-form",{ref:"formValidate",attrs:{model:n.formValidate,rules:n.ruleValidate,"label-width":80}},[t("Form-item",{attrs:{label:"用户名",prop:"username"}},[t("Input",{attrs:{placeholder:"请输入姓名"},model:{value:n.formValidate.username,callback:function(e){n.formValidate.username=e},expression:"formValidate.username"}})],1),n._v(" "),t("Form-item",{attrs:{label:"密码",prop:"password"}},[t("Input",{attrs:{type:"password",placeholder:"请设置密码"},model:{value:n.formValidate.password,callback:function(e){n.formValidate.password=e},expression:"formValidate.password"}})],1),n._v(" "),t("Form-item",{attrs:{label:"手机号码",prop:"phone"}},[t("Input",{attrs:{placeholder:"请输入手机号码"},model:{value:n.formValidate.phone,callback:function(e){n.formValidate.phone=e},expression:"formValidate.phone"}})],1),n._v(" "),t("Form-item",{attrs:{label:"用户类型",prop:"jurisdiction"}},[t("Select",{attrs:{placeholder:"请输入用户类型"},model:{value:n.formValidate.jurisdiction,callback:function(e){n.formValidate.jurisdiction=e},expression:"formValidate.jurisdiction"}},n._l(n.jurisdictionList,function(e){return t("Option",{key:e.value,attrs:{value:e.value}},[n._v(n._s(e.label))])}))],1),n._v(" "),t("FormItem",{attrs:{label:"性别",prop:"gender"}},[t("RadioGroup",{model:{value:n.formValidate.gender,callback:function(e){n.formValidate.gender=e},expression:"formValidate.gender"}},[t("Radio",{attrs:{label:"1"}},[n._v("男")]),n._v(" "),t("Radio",{attrs:{label:"0"}},[n._v("女")])],1)],1),n._v(" "),t("Form-item",[t("i-button",{attrs:{type:"primary"},on:{click:function(e){n.handleSubmit("formValidate")}}},[n._v("提交")]),n._v(" "),t("i-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:function(e){n.handleReset("formValidate")}}},[n._v("重置")])],1)],1)],1):n._e()])],1)},staticRenderFns:[]},n.exports.render._withStripped=!0},680:function(n,e,t){var a=t(608);"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t(22)("528fcca8",a,!1)}});
//# sourceMappingURL=12.5ff98f8f2ff3c4540f72.js.map